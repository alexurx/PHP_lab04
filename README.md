
# Лабораторная работа №4. Обработка и валидация форм

## Отчет по выполнению лабораторной работы

### 1. Цель работы
Я освоил принципы работы с HTML-формами в PHP, включая:
- Отправку данных на сервер
- Обработку и валидацию данных
- Сохранение данных в файловой системе
- Отображение сохраненных данных

### 2. Выполнение работы

#### 2.1. Создание проекта
Я создал проект "Каталог рецептов" со следующей структурой:
```
recipe-book/
├── public/                        
│   ├── css/                      # Стили
│   ├── index.php                 # Главная страница
│   └── recipe/                    
│       ├── create.php            # Форма добавления
│       └── index.php             # Список рецептов
├── src/                            
│   ├── handlers/                 # Обработчики форм
│   └── helpers.php              # Вспомогательные функции
├── storage/                      
│   └── recipes.txt              # Хранение данных
└── README.md                    
```

#### 2.2. Реализованные функции
1. **Форма добавления рецепта**:
   - Поля: название, категория, ингредиенты, описание, теги
   - Динамическое добавление шагов приготовления (JS)
   - Валидация всех полей

2. **Обработка формы**:
   - Фильтрация и очистка данных
   - Проверка на обязательные поля
   - Сохранение в JSON-формате
   - Перенаправление после успешного добавления

3. **Отображение рецептов**:
   - Главная страница - 2 последних рецепта
   - Отдельная страница со всеми рецептами
   - Пагинация (по 5 рецептов на страницу)

#### 2.3. Особенности реализации
- Использовал относительные пути для подключения файлов
- Вынес стили в отдельные CSS-файлы
- Реализовал систему обработки ошибок валидации
- Добавил динамическое управление шагами приготовления

### 3. Вывод
В ходе работы я:
- Научился работать с формами в PHP
- Освоил принципы валидации и фильтрации данных
- Реализовал хранение данных в файловой системе
- Улучшил навыки работы с JavaScript для динамических элементов
- Научился организовывать структуру проекта

Приложение полностью функционально и позволяет:
- Добавлять новые рецепты
- Просматривать добавленные рецепты
- Удобно навигироваться по списку рецептов

### 4. Контрольные вопросы

#### 1. Какие методы HTTP применяются для отправки данных формы?

**Основные методы:**
- **GET**:
  - Данные передаются в URL (видны в адресной строке)
  - Имеет ограничение по длине (~2048 символов)
  - Пример: `form method="GET"`
  - Используется для безопасных запросов (получение данных)

- **POST**:
  - Данные передаются в теле запроса (не видны в URL)
  - Нет ограничений по объему данных
  - Пример: `form method="POST"`
  - Используется для отправки конфиденциальных данных

**Дополнительные (в REST API):**
- PUT - обновление данных
- PATCH - частичное обновление
- DELETE - удаление данных

---

#### 2. Что такое валидация данных, и чем она отличается от фильтрации?

**Валидация**:
- Проверка соответствия данных требованиям
- Отвечает на вопрос: "Корректны ли данные?"
- Примеры проверок:
  - Обязательное поле не пустое
  - Email имеет правильный формат
  - Число в допустимом диапазоне
  - Пароль достаточной сложности

**Фильтрация**:
- Очистка/преобразование данных
- Отвечает на вопрос: "Как сделать данные безопасными?"
- Примеры:
  - Удаление HTML-тегов
  - Экранирование спецсимволов
  - Обрезка пробелов

**Ключевое отличие**:
- Валидация → проверка без изменения данных
- Фильтрация → изменение данных для безопасности

---

#### 3. Какие функции PHP используются для фильтрации данных?

**Основные функции:**

1. Для строк:
   - `trim()` - удаляет пробелы с обеих сторон
   - `htmlspecialchars()` - преобразует спецсимволы в HTML-сущности
   - `strip_tags()` - удаляет HTML и PHP-теги
   - `addslashes()` - экранирует кавычки

2. Для фильтрации переменных:
   ```php
   filter_var($data, FILTER_SANITIZE_STRING); // Устарело в PHP 8.1+
   filter_var($data, FILTER_SANITIZE_EMAIL);
   filter_var($data, FILTER_SANITIZE_URL);
   ```

3. Для массивов:
   - `array_map()` + функция фильтрации (например, `array_map('htmlspecialchars', $_POST)`)

4. Регулярные выражения:
   - `preg_replace()` - замена по регулярному выражению

```php
// Фильтрация email
$clean_email = filter_var($raw_email, FILTER_SANITIZE_EMAIL);

// Фильтрация целого числа
$clean_int = filter_var($raw_int, FILTER_SANITIZE_NUMBER_INT);
```
